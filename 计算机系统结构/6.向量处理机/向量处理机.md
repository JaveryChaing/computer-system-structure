## **向量处理机**

*向量：由一组有序，具有相同类型和位数的元素。在处理机中，能处理和识别向量指令的机器为向量处理机，主要用来处理同一种操作，数据很少相关的批量数据*

- #### **分向量流水处理机**

  > - 横向处理方式
  >
  >   > 从左向右依次读取指令循环执行，组成循环程序处理，不适用于并行
  >
  > - 纵向处理方式
  >
  >   > 按列从上往下进行（与数据无关）
  >
  > - 横纵分组
  >
  >   > 把向量分为若干组，组内按纵向方式处理
  >
  > 向量流水处理方式：横纵分组
  >
  > ---
  >
  > **向量流水处理机结构**
  >
  > 1. 存储器-存储器型结构（纵向处理）
  >
  >    > - 向量指令的源向量和目的向量都是存放在存储器中，运算的中间结果需要送回存储器
  >    > - **流水线运算部件的输入输出直接与存储器相连**
  >    >
  >    > ---
  >    >
  >    > **对存储器的带宽和通讯带宽要求高，采用多体交叉并行存储器和缓冲器技术**
  >
  > 2. 寄存器-寄存器结构（分组处理）
  >
  >    > *设置快速访问的向量寄存器，用于存放源向量，目的向量及中间结果，让运算部件的输入，输出端与向量寄存器相联*
  >
  > ---
  >
  > **提高向量处理机性能技术**
  >
  > 1. 设置多个功能部件，使其并行工作
  >
  > 2. 采用链接技术（当前一条指令的结果寄存器是后一条指令源寄存器）
  >
  >    > 无向量寄存器使用冲突
  >    >
  >    > 前一条指令向量结果与向量寄存器时钟同步
  >
  > 3. 加快条件语句
  >
  > 4. 稀疏矩阵处理

- #### **阵列处理机**

  > **阵列处理机特点**
  >
  > *与向量流水线处理机对比，阵列处理机利用资源重复提升速度，在并行处理中，偏向于同时性，使每个处理单元读同时负担各种运算，但部件利用率低，成本高*
  >
  > 
  >
  > **阵列处理机构形**
  >
  > - **分布式存储器**
  >
  >   > 各处理单元由局部存储器PEM存放分布数据（只能被本处理单元直接访问），批量的指令分布在PEM中存储，并由PE处理单元执行，PE单元可以通过ICN互连网络交换数据
  >
  > - **集中式共享存储器**
  >
  >   > 存储系统由k个存储分体组成，**通过ICN为全部N个处理单元共享**，与分布式不同的是，ICN用于处理单元与存储分体之间数据交换
  >
  > 
  >
  > **ILLIAC IV处理单元阵列结构**（第四代计算机，超大规模集成电路）
  >
  > <img src="img/image-20220904004408119.png" alt="image-20220904004408119" style="zoom:80%;" /> 
  >
  > 
  >
  > ![image-20220904012024509](img\image-20220904012024509.png) 
  >
  > *任意一个PU单元与其相邻的单元链接，在N个处理单元中，任意两个单元的最短距离不会超过$\sqrt{N} - 1 步$*
  >
  
  #### **SIMD计算机的互联网络** 
  
  >  **SIMD网络设计目标**：*结构简单，减低成本，互联灵活，满足算法和应用需要，处理单元传播路径少，提高速度，使用规整单一部件组合或通过多级连接复杂互连*
  >
  >  
  >
  > **互连网络抉择：**（网络元件，互连结构，控制方式）
  >
  > - 同步，异步：一般采用同步方式让所有PE按时钟同步进行，（异步或组合多用户多处理机）
  >
  > - 线路交换，包交换（线路交换在源目的与实际目的建立通路适用于大批量数据传输，包交换用于网络和多处理机中）
  >
  > - 网络拓扑
  >
  > - 动态网络（由部分组件串联，需要经过多次循环后才能到达目的单元）
  >
  >   
  >
  > 
  >
  > #### **基本的单级互连网络**
  >
  > $n = log_2N$ ，可以用n位二进制来表示N个输入端和输出端的二进制地址
  >
  > 
  >
  > 1. 恒等函数，同号输入输出端直连  
  >
  > 2. **立方体单级网络**(交换函数)
  >
  >    > *N个通信节点n = $log_2N$中互连函数，当N=8时，n=3，用于立方体互连函数*
  >    >
  >    > 即： 
  >    > $$
  >    > Cube_0(x_2x_1x_0) = x_2x_1 \overline{x_0} \\
  >    > Cube_1(x_2x_1x_0) = x_2\overline{x_1} x_0 \\
  >    > Cube_2(x_2x_1x_0) = \overline{x_2}x_1 x_0
  >    > $$
  >    > ![image-20220905095343337](img\image-20220905095343337.png) 
  >    >
  >    > ---
  >    >
  >    > 单级立方体网络的最大距离为n, 即反复使用单级网络， 最多经n 次传送就可以实现任意一对入、出端间的连接. 而且任意两个结点之间至少有n条不同的路径可走，容错性强， 只是距离小于n 的两个结点之间各条路径的长度可能不等.
  >
  > 3. **PM2I**
  >
  >    > **与j号处理单元直接相连的是 $j\pm2^i$** 
  >    > $$
  >    > \left\{	
  >    > \begin{array}{c}
  >    > PM2_{+i}(j) = j + 2^i \ mod \ N  \\
  >    > PM2_{-i}(j) = j - 2^i \ mod \ N
  >    > \end{array}
  >    > \right. \\
  >    > N表示处理单元， 结点 0 \le j \le N-1 \ \ \ \ 0\le i \le log2N -1 ,共有2n-1个互连函数不同 \\
  >    > $$
  >
  > 4. **混铣交换**(置换函数)
  >
  >    > *将输入端分成数目相等的两部分，两部分端点交叉链接*
  >    > $$
  >    >  o(x_{n-1},x_{n-2},...x_1,x_0) = x_{n-2}x_{n-3}....x_1x_0x_{n-1} \\ 相邻位数交换（把输入端的二进制编号循环向左移动一位）
  >    > $$
  >    > 
  >
  > 5. **蝶形单级**
  >
  >    > Butterfly($P_{n-1},P_{n-2},...P_{1},P_{0}$) = $P_0P_{n-2}...P_1P_{n-1}$
  >    >
  >    > *将二进制最高位与最低位交换位置*
  >
  > #### **基本多级互连网络**
  >
  > - 交换开关：具有两个入端和两个出端的交换单元，构成多级互连网络
  >
  > - 拓扑结构：各级出端与入端的互连模式（单级互连模式）
  >
  > - 控制方式
  >
  >   > 1. 级控制（同级所有开关只用一个控制信号）
  >   > 2. 单元控制（每个开关都有独立信号）
  >   > 3. 部分级控制
  >
  > **多级立方体网络**
  >
  > > * 
  
  

