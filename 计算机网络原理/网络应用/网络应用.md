## 网络应用

> ###### 网络应用体系结构
>
> > - C/S
> > - P2P
> > - 混合应用
>
> #### 网络应用基本原理
>
> > __网络应用编程接口套接字(Socket),进程应用可以通过创建套接字实现与底层协议接口,实现进程与协议之间报文交换(应用进程与其他应用进程进行网络通讯的通道)__
>
> > 通过IP地址与主机上端口可以确定用户进程
>
> 
>
> - TCP服务
>
>   > 面向连接服务(三次握手保证服务器进程与用户进程的套接字建立逻辑连接)
>   >
>   > 可靠的数据传输房屋(无差错,按顺序交付所有发送的数据)
>
> - UDP服务
>
>   > 不可靠传输
>
> #### DNS域名系统(Domain Name System)
>
> > _使用域名进行网络通讯时,首先请求DNS应用,将域名映射为IP地址,实现域名与IP地址转换(域名解析)_
> >
> > - 层次化命名
> >
> >   > ![image-20211008165240622](image-20211008165240622.png) 
> >
> > - 域名服务器
> >
> >   > ![image-20211008165521320](image-20211008165521320.png)
> >
> > - 域名解析
> >
> >   > ![image-20211008170016240](image-20211008170016240.png) 
>
> #### 万维网应用
>
> > - Http
> >
> >   > - 非持久连接
> >   >
> >   >   > 单次请求创建TCP连接,响应后断开
> >   >
> >   > - 并行连接(建立多条TCP连接同时传输数据)
> >   >
> >   >   > ![image-20211008170856050](image-20211008170856050.png) 
> >   >
> >   > - 持久连接(响应后不立即断开TCP连接)
> >   >
> >   >   > 非流水方式持久连接(同步请求,等待上一次请求响应后才能继续请求)
> >   >   >
> >   >   > 流水方式持久连接(连续发送请求)
> >   >
> >   > - __HTTP报文__
> >   >
> >   >   > ![image-20211008171450089](image-20211008171450089.png) 
> >   >   >
> >   >   > ![image-20211008171802417](image-20211008171802417.png) 
> >   >   >
> >   >   > ![image-20211008171854315](image-20211008171854315.png) 
> >   >   >
> >   >   > ![image-20211008171913571](image-20211008171913571.png) 
> >
> > - Cookie(Http无状态协议)
> >
> >   > _Http服务器在向客户发送请求文件后,不会保存该客户的状态信息,客户端与服务器数据交换完成,无法跟踪用户会话_
> >   >
> >   > __Cookie包含内容__
> >   >
> >   > - HTTP响应报文的Cookie头行 Set-Cookie
> >   > - 用户浏览器本地存储
> >   > - Http请求报文中Cookie行
> >   > - 后台维护的数据(用户ID等)
> >   >
> >   > ![image-20211008172438796](image-20211008172438796.png) 
>
> #### Internet 电子邮件
>
> > _SMTP,用户代理,邮件读取协议_
> >
> > ![image-20211008172617084](image-20211008172617084.png) 
> >
> > ###### SMTP(推送协议) 25
> >
> > > _实现用户到用户服务器之间的邮件传输,使用TCP实现可靠数据传输_
> > >
> > > > SMTP协议特定
> > > >
> > > > - SMTP只能传输7位ASCII码文内容(图片,文件字符集发送需要转解码)
> > > > - SMTP使用CRLF.CRLF进行内容标识,在传输时需要转义
> > > > - 推动协议,当客户端有邮件发送服务器时,客户端推送服务器
> > > > - SMTP使用TCP连接持久
> >
> > ###### 电子邮件格式与MIME
> >
> > > ![image-20211009102145357](image-20211009102145357.png) 
> > >
> > > MIME
> > >
> > > ![image-20211009102243327](image-20211009102243327.png) 
> >
> > ###### 邮件读取协议(拉取)
> >
> > > POP3   IMAP  HTTP
> > >
> > > _POP3对邮件操作都是在本地执行(不能移动,查询,删除邮件服务器上内容),IMAP具有与邮件服务器关联操作_
>
> #### FTP(文件传输协议,有状态协议)
>
> > ![image-20211009103228808](image-20211009103228808.png) 
>
> #### P2P应用
>
> > TODO
>
> #### Socket编程基础
>
> > _网络应用进程通讯时需要通过API接口请求底层协议的服务,使用SocketApi进行网络通讯_
> >
> > 网络进程创建三种类型Socket:
> >
> > - SOCK_DGRAM(数据报类型)
> >
> >   > 面向UDP接口
> >
> > - SOCK_STREAM(流式)
> >
> >   > 面向TCP接口
> >
> > - SOCK_RAW(原始)
> >
> >   > 使用IP,ICMP接口
> >
> >  ![image-20211009103907105](image-20211009103907105.png) 
> >
> > ###### Socket API 常用函数
> >
> > > ![image-20211009104250364](C:\Users\miaomiaole\AppData\Roaming\Typora\typora-user-images\image-20211009104250364.png) 
> > >
> > > ![image-20211009104320691](image-20211009104320691.png)
> > >
> > >  ![image-20211009104500995](image-20211009104500995.png) 
> > >
> > > __基于Socket创建TCP流程__
> > >
> > > ![image-20211009104632899](image-20211009104632899.png) 
> > >
> > > _服务器调用accept()函数时,通常阻塞服务器进程,等待客户连接请求,_
> > >
> > > __基于Socket创建UDP流程__
> > >
> > > ![image-20211009104946458](image-20211009104946458.png) 



