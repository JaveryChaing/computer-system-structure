## 存储管理

- #### **存储体系**

> *计算机系统中存储器一般分为主存储器和辅助存储器两级。主存储器简称主存，又称内存，它由**顺序编址的单元**（通常为字或字节）所组成，是处理机直接存取指令和数据的存储器。它速度快，但容量有限。辅助存储器简称辅存，又称外存，它由**顺序编址的“块”所组成，每块包含若干个单元**，**寻址与交换均以块为单位进行**，处理机不能直接访问它，须经过专门的启动I/O过程与内存交换信息。它存取速度较慢，但容量远大于内存。实际上，现代计算机系统中用户的数据（或信息）都是保存在外存中。*
>
> 存储管理主要是对内存的管理，同时也涉及对内存和外存交换信息的管理。内存可以分成系统区和用户区两部分，系统区用来存储操作系统等系统软件，用户区用于分配给用户程序使用，存储管理实际上是对用户区的管理
>
> ---
>
>  **存储管理目的**
>
> 为用户提供方便，安全和充分的存储空间
>
> 方便是指将**逻辑地址和物理地址**分开，用户只在各自的逻辑地址空间编写程序，不必过问物理空间和物理地址的细节，地址的转换由操作系统自动完成；
>
> 安全是指同时驻留在内存的多个**用户进程相互之间不会发生干扰**，也不会访问操作系统所占有的空间；
>
> 充分大的存储空间是指利用**虚拟存储技术**，从逻辑上对内存空间进行扩充，从而可以使用户在较小的内存里运行较大的程序。

- #### **存储管理任务**

> - 地址转换
>
>   > 逻辑地址：用户程序**经过编译或汇编后形成的目标代码出现的地址**（通常为相对地址）
>   >
>   > 物理地址：内存中存储单元编号为物理地址（绝对地址）
>   >
>   > 处理机执行的指令按物理地址操作数据（进程运行前必须把指令中逻辑地址转为内存中物理地址）
>
> - 内存分配与回收
>
>   > 用户程序载入内存创建进程时，需要向操作系统提出申请
>
> - 内存地址保护
>
>   > 内存地址保护一般由硬件和软件配合实现，当访问内存中单元时，由硬件检查是否运行访问
>
> - 内存共享
>
> - 内存扩充

- #### **程序的连接和装入**

  > **用户程序执行流程：**
  >
  > 编译：由编译程序将用户源代码编译成若干个目标模块；
  >
  > 连接：由连接程序将编译后形成的目标模块以及它们所需要的库函数连接在一起，形成一个装入模块；
  >
  > 装入：由装入程序将装入模块装入内存
  >
  > ---
  >
  > **程序的连接：**(程序编译后将得到一个或者多个目标模块，多个模块需要对应的函数连接成一个可执行程序)
  >
  > 1. 静态连接方式
  >
  >    > 将目标模块及它们所需的函数库连接打包模块
  >    >
  >    > - 将目标模块中相对地址修改为本程序对应的相对地址
  >
  > 2. 装入时动态连接
  >
  >    > 调用外部模块事件，修改目标模块相对地址
  >
  > 3. 运行时动态连接
  >
  > **程序的装入：**（模块装入内存时，需要进行地址转换）
  >
  > 1. 绝对





