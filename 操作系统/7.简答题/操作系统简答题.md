## **基础知识**

- 操作系统结构研究的目标 

  > - 系统模块化
  > - 模块标准化
  > - 通讯规范
  
- PSW 程序状态字（处理器当前工作状态）

  > CF：进位标志
  >
  > ZF：结果为0
  >
  > SF：符号
  >
  > OF：溢出
  >
  > TF：陷阱标识位
  >
  > IF：中断屏蔽位
  >
  > VIF：虚拟中断
  >
  > VIP：虚拟中断待决标识位

- 进程的特性

  > 并发：多个同时执行
  >
  > 动态：具有生命周期
  >
  > 独立：相对完整的资源分配单位
  >
  > 交往：进程协同工作
  >
  > 结构：程序，数据，PCB
  >
  > 异步：不可只的速度推进

- 线程

  > 线程是调度和分配的基本单位
  >
  > 进程是资源拥有的基本单位

- 消息缓冲区组成结构

  > 消息长度
  >
  > 消息正文
  >
  > 发送者
  >
  > 消息队列指针

- 管程特点

  > 模块化：管程是一个基本程序单位
  >
  > 抽象数据类型：特殊的数据类型
  >
  > 信息屏蔽：提供函数进行操作

- 信号量PV是两条低级通讯原语

- 文件按逻辑结构分类

  > 1. 无结构的字符流式文件
  > 2. 定长记录文件
  > 3. 不定长记录文件构成的记录树

- 系统资源分配图 P表示进程（使用圆圈表示） R表示资源（使用矩形表示）

  > $P \to R$ 表示进程P正在申请R资源（等待分配)
  >
  > $P\leftarrow R$ 表示进程P持有R资源

## **操作系统简答题**

- 简述操作系统类型

  > 1、批处理操作系统； 一批作业提交给操作系统后就不再干预，由操作系统控制它们自动运行
  >
  > 2、分时操作系统； 
  >
  > 3、实时操作系统；在规定时间内完成作业
  >
  > 4、通用操作系统；同时兼有多道批处理、分时、实时处理的功能，或者其中两种以上功能的操作系统。
  >
  > 5、网络操作系统；提供网络通信和网络服务功能的操作系统
  >
  > 6、分布式操作系统；计算机网络为基础的，将物理上分布的具有自治功能的数据处理系统
  >
  > 7、嵌入式操作系统。嵌入式智能芯片环境中

- 简述分时操作系统的基本工作方式及特点

  > 用户通过终端交互方式向系统提出命令请求，系统接收命令后，以时间片轮询方式处理用户请求；
  >
  > - 交互性（同时运行）
  > - 多路性（多用户同时性）
  > - 独立性（用户之间操作互不干扰）
  > - 及时性（短时间内可以得到系统答复）

- 简述时钟对操作系统的作用

  > - 多道程序运行环境中，时钟负责维护时间、防止一个进程长期占用 CPU 时间等其他功能
  > - 分时系统中，以时钟间隔来执行作业调度
  > - 实时系统中，按照要求的时间处理作业
  > - 定时唤醒指定的事件
  > - 记录时间发生时间和时间间隔

- 简述中断请求响应的工作过程

  > 1. 处理器接收中断信号
  > 2. 保护现场（将中断断点的程序状态字PSW和计数器PC存入系统堆栈）
  > 3. 取得中断处理程序的入口地址
  > 4. 调用中断处理程序

- 简述指令的分类和相应功能

  > - 访问存储器指令（CPU和存储器之间数据传输）
  > - I/O指令（处理器与I/O模块数据传输与命令发送)
  > - 算数指令（数据处理指令，相关逻辑操作）
  > - 控制转移指令
  > - 处理器控制指令

- 简述多级中断作用

  > 1. 对各类中断信号紧急程度和重要性分级
  > 2. 多个中断信号到达时，优先处理那个中断程序

- 简述进程控制的原语种类

  > - 创建
  > - 撤销
  > - 挂起
  > - 激活
  > - 阻塞
  > - 唤醒

- 简述PCB主要功能和属性

  > 进程控制块记录进程名称，状态，地址，资源清单，优先级，消息队列指针，进程队列指针；
  >
  > 操作系统通过PCB来对进程实现并发控制和管理

- 简述进程的基本属性

  > 进程是一个可拥有资源的独立单位
  >
  > 在未引用线程机制下，进程是一个可以独立调度和分派的基本单位

- 简述进程调度的主要功能

  > 系统中的进程按状态分组成不同的队列，依据一定的算法，从就绪队列中选出一个进程执行

- 进程通讯实现方法（消息缓冲区通讯）

  > 共享存储(同步，互斥信号)
  >
  > 管道
  >
  > > 进程间对管道访问互斥，数据以直接流方式写入管道，管道写满时系统对写进程阻塞，等读进程将管道数据完全取走后，管道变空，读进程将被系统阻塞，并唤醒写进程。读写进程最多只能有一个
  >
  > 消息传递(操作系统发送和接收原语)
  >
  > > 同管道

- 简述死锁必要条件和处理策略

  > 1. 互斥条件
  > 2. 不剥夺条件（其他进程无法剥夺临界区使用权，只能主动释放）
  > 3. 请求和保持条件（进程至少持有一个资源下，又请求新的资源，新资源被其他进程占用）
  > 4. 循环等待条件（资源的循环等待链）
  >
  > 处理策略
  >
  > - 预防死锁（防患未然，破坏死锁四个必要条件）
  >
  >   > 1. 摒弃请求保持条件（系统要求所有进程一次性地申请其所需的全部资源）
  >   > 2. 摒弃不剥夺条件（新资源请求不能立即占用，主动放弃已保持的所有资源）
  >   > 3. 摒弃环路等待条件（将所有的资源按照类型进行线性排序，对于进程的请求，必须严格按照线性顺序占有）
  >
  > - 避免死锁（进程申请资源时进行动态检查是否会发生死锁后决定是否分配资源）
  >
  >   > 1. 安全状态与安全序列(操作系统保证所有进程在有限时间内获取到需要的全部资源)
  >   > 2. 银行家算法
  >
  > - 死锁检测与解除
  >
  >   > 检测进程P对资源R的请求是否形成环路（环路中每个资源类只包含一个资源实例）
  >   >
  >   > ---
  >   >
  >   > 1. 剥夺资源
  >   > 2. 撤销进程

- 简述进程与线程之间关系特点

  > - 同一进程下不同的线程共享进程资源
  > - 线程不拥有系统资源，由所属的进程申请
  > - 线程创建，销毁，调度的开销比进程少
  > - 用户线程之间通讯无须调用内核
  > - 线程能独立在CPU上执行，是CPU分派，调度基本单位

- 简述并发执行特点，并发与并行区别

  > 并发
  >
  > 1. 执行期间程序相互约束
  > 2. 程序与计算不在对应
  > 3. 并发程序执行的结果不可预知
  >
  > ---
  >
  > 并发与并行
  >
  > - 并发：在同一时刻，程序同时执行
  > - 并行：在一段时间内，程序交替执行

- 简述采用信号量P，V同步机制来编写并发程序的优点，缺点

  > 1. 程序易读性差
  > 2. 不利于修改和维护
  > 3. 正确性难以保证
  >
  > ---
  >
  > 管程的特性
  >
  >  代替PV信号量，更容易实现进程同步与互斥
  >
  >  管程的数据只能被管程方法访问和修改
  >
  >  每次仅允许一个进程在管程内执行方法
  >
  >  编译器实现进程互斥

- 简述二级文件目录的优点缺点

  > 二级目录解决文件重名问题，可以实现用户之间文件的共享，查找时间降低，二级目录不能对文件分类
  >
  > 三级目录可以对文件分类，树形目录不便于实现文件共享，增加I/O读写开销

- 简述建立文件的步骤

  > 1. 检查参数合法性
  > 2. 检查目录下是否有同名文件
  > 3. 在目录中是否有空闲位置（申请块空间）
  > 4. 填写目录项内容（文件名，用户名，存储权限，文件首地址）

- 文件保密的措施

  > - 隐藏文件目录
  > - 设置口令
  > - 使用密码
  > - 访问控制

- SpooLing技术基本思想

  > 假脱机技术，外部设备与主机数据交互时，使用共享设备(磁盘)作为主机的直接输入输出设备，后续通过通道传输到设备中。

- 简述常用I/O控制技术及其特点

  > 1. 程序直接轮询控制，需要CPU不断轮询检查设备控制器状态，CPU效率低，I/O设备只能串行工作
  > 2. 中断驱动方式，进程请求I/O操作时，中断该进程，CPU执行其他操作，待I/O控制器向CPU发出中断后，唤醒之前阻塞的进程；传输效率低，需要CPU处理
  > 3. DMA，DMA控制器自动控制块数据在内存和I/O单元之间传输，传输数据以块为单位交换，CPU与I/O设备性能的到提升
  > 4. 通道控制；专门处理I/O数据的物理硬件，通道可以识别或执行一系列的通道指令，I/O,CPU,通道可以并行工作，资源很高
  >
  > ![image-20220410214437360](C:\Users\miaomiaole\AppData\Roaming\Typora\typora-user-images\image-20220410214437360.png)

- 简述一般的I/O软件构成

  > - 用户层软件
  > - 设备独立性软件
  > - 设备驱动程序
  > - 中断处理程序
  > - 硬件

- 简述设备独立层软件功能

  > 1. 提供用户层调用结构
  > 2. 设备保护
  > 3. 差错处理
  > 4. 设备回收与分配
  > 5. 数据缓存区管理
  > 6. 建立逻辑设备名到物理设备名的映射关系

- 简述使用共享设备的方法

  > 1. 共享设备（设备被占用，进入设备等待队列）
  > 2. 启动设备
  > 3. 释放设备（设备发出中断信号，系统在设备等待队列中唤醒一个进程执行）

## **操作系统综合题**

- #### **进程调度算法**

> - CPU利用率
>
>   > $利用率= \frac{忙碌时间}{总时间}$
>
> - 系统吞吐量（单位时间完成作业数量）
>
>   > $系统吞吐量 = \frac{总共完成作业}{总时间}$
>
> - 周转时间(作业提交系统到作业完成所用时间)
>
>   > 周转时间 = 作业调度时间+进程调度时间+内存调度时间 = **结束时间 - 开始时间**
>   >
>   > 平均周转时间 = $\frac{各作业周转时间之和}{作业数}$
>   >
>   > 平均带权周转时间 = $\frac{带权周转时间之和}{作业数}$    带权指的是运行时间
>   >
>   > 带权周转时间 = $\frac{作业周转时间}{作业实际运行时间}$ > 1
>
> - 等待时间(进程等待处理机状态时间之和)
>
>   > 对于进程：等待时间就是只的是进程创建后等待被服务的时间和
>   >
>   > > 进程等待时间 = 周转时间-运行时间-阻塞时间
>   >
>   > 对于作业：包含创建进程等待时间和作业等待时间
>
> - 响应时间(用户提交请求到首次产生响应所用的时间)
>
> **FCFS（先来先服务）**
>
> **SJF（短作业优先，要求运行时间短）**
>
> **HRRN（高响应比优先）**
>
> **优先级调度算法**
>
> **多级反馈队列算法**

### **进程同步与互斥**

> #### **互斥：**
>
> > S = 1 
>
> > P(S) ----- V(S)
>
> #### **同步：**
>
> > 初始信号量**S = 0** 
>
> > **在前操作之后执行V(S)**
>
> > **在后操作之前执行P(S)**

#### **存储管理**

> ![image-20220407215829781](image-20220407215829781.png)
>
> ![image-20220409134700486](D:\code\computer-system-structure\操作系统\4.存储管理\image-20220409134700486.png)

#### **文件系统**

> **文件物理空间分配方式**
>
> 1. 连续分配
>
>    > **每个文件在磁盘上占有连续的磁盘块（物理存储单元相邻，FCB中记录长度和起始位置）**
>    >
>    > ---
>    >
>    > **物理块号 = 起始块号 + 逻辑块号** （通过逻辑块号可以知道物理块号）
>    >
>    > ---
>    >
>    > 支持顺序访问和随机访问，文件采用连续分配的方式存储，在**顺序读写时速度最快**
>    >
>    > ---
>    >
>    > 文件内容扩展效率低，需要连续的物理存储空间，且会产生**磁盘碎片**
>
> 2. 链接分配（离散分配）
>
>    > 隐式链接 
>    >
>    > > **FCB记录文件起始块和结束块**，并执行该文件**记录下一个存储单元指针**）
>    > >
>    > > **只支持顺序访问，不支持随机访问，查找效率低，利于文件扩展，不存在磁盘碎片，外存利用率高**
>    >
>    > 显式链接
>    >
>    > > **FCB记录文件起始块** 
>    > >
>    > > FAT 文件分配表（将用于链接文件各**物理块的指针和对应的下一块指针**显示存放在一张表中）
>    > >
>    > > ​	**一个磁盘对应一个文件分配表**，FAT常住内存，不需要读盘操作，地址转换时不需要访问磁盘，支持顺序访问 
>
> 3. 索引分配
>
>    > 系统为每个文件建立索引表，索引表记录文件到各个**磁盘块对应的物理块**
>    >
>    > **FCB记录索引块，索引块中记录磁盘块和逻辑块的映射关系**
>
> 
>
> **磁盘一次读写操作需要的时间**
>
> 1. 寻址时间
>
>    > 启动磁头臂时间 s  移动单个磁道时间m，n为跨越的磁道，**寻道时间 = $T_S = s + m \times n$**
>
> 2. 延迟时间
>
>    > 通过旋转磁盘，使磁头定位到目标扇区所需要的时间  $T_R = \frac{1}{2} \times \frac{1}{r} =  \frac{1}{2r}$  (r为磁盘转速)
>
> 3. 传输时间
>
>    > 从磁盘读出或向磁盘写入数据经历的时间   传输时间$T_t = \frac{1}{r} \times \frac{b}{N} = \frac{b}{rN}$  (r为磁盘转速，b为磁盘读写速度，N为每个磁道上字节数)
>
> ---
>
> 1. 先来先服务FCFS
>
> > 大量进程竞争使用磁盘，请求访问磁道分散，则FCFS性能差，寻道时间长
>
> 2. 最短寻找时间优先 SSTF
>
> > SSTF优先处理距离当前磁头进的磁道，保证每次寻道的时间最短，可能产生饥饿
>
> 3. 扫描算法SCAN
>
> > **只有磁头移动到外侧磁道时候才能往内移动** 不会产生饥饿
> >
> > Look算法，如果磁头移动方向没有访问的扇区，可以立即改变移动方向
>
> 4. 循环扫描算法（C-SCAN）
>
> > 磁头朝某个特定方向移动时才处理磁道的访问请求，返回时直接快速移动致起始段（**返回不处理请求**）



