## 服务器性能剖析

> ~~~mysql
> set profiling = 1;
> -- 查看执行查询每个步骤花费的时间
> show profiles;
> -- 计数器(查询索引使用次数
> show status;
> show global status;
> -- 查询线程是否处于不正常状态
> show processlist;
>   sleep (代表客户端与服务器连接资源未断开,连接数过多影响查询性能)
>   Waiting for net,reading from net ,writing to net(网络资源被占用)
>   Locked (更新操作锁定)
>   Copy to tmp table(索引失效,使用临时表示代替现有查询,将产生巨大的I/O开销)
>   sending data (从磁盘加载数据到进程,索引项不够优化)
>   storing result to query cache (查询碎片过多)
>   freeing items (执行时间较长,磁盘,内存不够)
>  -- 使用慢查询日志
>  set global slow_query_log = on; 
>  -- 长达1秒的sql将记录日志
>  long_query_time = 1
>  -- 查询慢查询所在文件目录
>  show variables like '%quer%';
>  
> ~~~
>
> - 定义性能最有效方法时响应时间
>
>   

